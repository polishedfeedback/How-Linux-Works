# üìÖ Date: 2025-09-15
## üìñ Pages Covered
From page: 46  To page: 
- kernel provides most device i/o operations as files
- these _device files_ are sometimes called _device nodes_ 
- devices are usually located in `/dev` directory
- to send the output of a command to a null device, you can do the below
```
echo something > /dev/null
```
- to see the permissions of the devices inside the `/dev` directory, use `ls -l /dev`
- the first character of the output denotes the device type.
    - `b` indicates that it is a block type device
    - `c` indicates that it is a character type device
    - `p` indicates that it is a pipe type device
    - `s` indicates that it is a socket type device
#### block devices
- block devices are used to read the data in blocks
- the size of the block devices are fixed so they are easy to index and the kernel can pick 
any block of the device when needed
- hard disks are usually block devices as their size is fixed
#### character devices
- you can only read or write characters to a character device like `/dev/null`
- as the character devices do not have a fixed size, the kernel performs read and write operations when writing to it or reading from it
- printers directly attached to the computer are represented by character devices
#### pipe devices
- _named pipes_ are character devices but the only difference is there will be another process at the end of i/o stream instead of a kernel driver
#### socket devices
- socket devices are usually useful for interprocess communications and are usually located outside `/dev` directory

- when you do `ls -l /dev` the number in the output below before the dates are the _major_ and _minor_ device numbers that the kernel uses to identify the device. for example, hard disks like _sda1_ and _sda2_ both have the same numbers
```
brw-rw---- 1 root disk 8, 1 sep 6 08:37 sda1
crw-rw-rw- 1 root root 1, 3 sep 6 08:37 null
prw-r--r-- 1 root root 0 mar 3 19:17 fdata
srw-rw-rw- 1 root root 0 dec 18 07:43 log
```

### The sysfs device path
- `/dev` directory lists out all the devices that the kernel recognises and lets the user processes use it  
- The problem with this is kernel lists out the devices in a sequence that they are read or found
- The names of the devices might differ between reboots
- The `/sys` directory provides the uniform interface through a system of files and directories
- Most of the devices are listed out in `/sys/devices` 
- The difference between `/sys` and `/dev` are, `/dev` enables the user processes to use the device whereas `/sys` path is used to view the information and manage the device
- `/sys/block` lists out all the block devices available on a system
- Most of these are symbolic links and the original path can be found when you run `ls -l /sys/block` 
- use `udevadm info --query=all --name=/dev/nvme0` by replacing the `/dev/nvme0` to the desired path to find a the sysfs location of the device

### dd and devices
- data duplicator or popularly known as dd is a program that is extremely useful when working with character or block devices
- It is useful when you want to pass certain blocks or chunks of data from a input or a stream to a output or a stream
- Basic example of `dd` is 
```bash
dd if=/dev/zero of=new_file bs=1024 count=1
```
- In the example above, dd copies 1024 bytes of data from `/dev/zero` which is a continuous stream of zero bytes to a `new_file` 
- Some important `dd` options are:
    - **if=file** - The input file. Default is standard input
    - **of=file** - The output file. Default is standard output
    - **bs=size** - The block size that dd reads at a time. To abbreviate large chunks of data, you can use b and k to signify 512 and 1024 bytes. For example, bs=1k instead of bs=1024
    - **ibs=size, obs=size** - The input and output block sizes. If you want a separate block size for both input and output, use these options or else use bs 
    - **count=num** - The total number of blocks to copy. When working with a huge file or a device that supplies and endless stream of data like `/dev/zero`, you want `dd` to stop at a particular fixed point.
    - **skip=num** - Skip past the first num blocks in the input file or stream, and do not copy them to the output

### Device Name Summary
- To find a device name on a Linux system, query `udevd` using `udevadm`
- Look for the device in the `/sys` directory
- Guess the output of the `journalctl -k` command which prints the kernel messages
- Observe the output of `mount` command and find the disk device that is already visible to the system
- Run `cat /proc/devices` to see the block and character devices for which the system currently has the drivers

---

## üìù Key Points (in my own words)

---

## ‚ùì Flashcards
START
Basic
Front: How does the kernel provide most device I/O operations?
Back: Kernel provides most device I/O operations as files
<!--ID: 1758005743018-->
END

START
Basic
Front: What are device files sometimes called?
Back: Device nodes
<!--ID: 1758005743026-->
END

START
Basic
Front: Where are devices usually located in Linux?
Back: In the `/dev` directory
<!--ID: 1758005743034-->
END

START
Basic
Front: How do you send output of a command to a null device?
Back: `echo something > /dev/null`
<!--ID: 1758005743041-->
END

START
Basic
Front: What command shows the permissions of devices inside the `/dev` directory?
Back: `ls -l /dev`
<!--ID: 1758005743051-->
END

START
Basic
Front: What does the first character in `ls -l /dev` output denote?
Back: The device type
<!--ID: 1758005743062-->
END

START
Basic
Front: What does 'b' indicate in device file permissions?
Back: Block type device
<!--ID: 1758005743071-->
END

START
Basic
Front: What does 'c' indicate in device file permissions?
Back: Character type device
<!--ID: 1758005743090-->
END

START
Basic
Front: What does 'p' indicate in device file permissions?
Back: Pipe type device
<!--ID: 1758005743100-->
END

START
Basic
Front: What does 's' indicate in device file permissions?
Back: Socket type device
<!--ID: 1758005743112-->
END

START
Basic
Front: How do block devices read data?
Back: Block devices read data in blocks
<!--ID: 1758005743117-->
END

START
Basic
Front: Why are block devices easy to index?
Back: Because the size of block devices is fixed, so the kernel can pick any block of the device when needed
<!--ID: 1758005743121-->
END

START
Basic
Front: What type of devices are hard disks usually represented as?
Back: Block devices, as their size is fixed
<!--ID: 1758005743126-->
END

START
Basic
Front: What can you do with character devices?
Back: You can only read or write characters to a character device like `/dev/null`
<!--ID: 1758005743129-->
END

START
Basic
Front: Why does the kernel perform read and write operations differently for character devices?
Back: Because character devices do not have a fixed size, the kernel performs read and write operations when writing to it or reading from it
<!--ID: 1758005743156-->
END

START
Basic
Front: What are printers directly attached to computers represented as?
Back: Character devices
<!--ID: 1758005743164-->
END

START
Basic
Front: How are named pipes different from regular character devices?
Back: Named pipes are character devices but the difference is there will be another process at the end of I/O stream instead of a kernel driver
<!--ID: 1758005743169-->
END

START
Basic
Front: What are socket devices useful for?
Back: Socket devices are useful for interprocess communications
<!--ID: 1758005743173-->
END

START
Basic
Front: Where are socket devices usually located?
Back: Usually located outside `/dev` directory
<!--ID: 1758005743177-->
END

START
Basic
Front: What are the numbers before the dates in `ls -l /dev` output called?
Back: Major and minor device numbers that the kernel uses to identify the device
<!--ID: 1758005743183-->
END

START
Basic
Front: Do hard disk partitions like sda1 and sda2 have the same major device number?
Back: Yes, hard disks like sda1 and sda2 both have the same major device numbers
<!--ID: 1758005743187-->
END

---

## üîÑ Review Log
- [ ] Day 2: {{date+1d}}
- [ ] Day 4: {{date+3d}}
- [ ] Day 8: {{date+7d}}
- [ ] Day 15: {{date+14d}}
